{
  "id": "gen-article",
  "type": "workflow",
  "config": {
    "name": "Generate Article from Wire",
    "description": "Generate an article when a new wire appears",
    "nodes": [
      {
        "id": "gen-article-endpoint",
        "type": "endpoint",
        "config": {
          "path": "gen-article",
          "type": "post",
          "outputEventName": "wireDataReceived",
          "schema": {
            "uid": "string",
            "headline": "string",
            "subhead": "string",
            "content": "string",
            "date": "date"
          }
        }
      },
      {
        "id": "gen-article-query-vector",
        "type": "query-vector",
        "config": {
          "inputEventName": "wireDataReceived",
          "vectorType": "weaviate",
          "query": "${headline} ${content}",
          "outputEventSchema": [
            {
              "uid": "string",
              "headline": "string",
              "subhead": "string",
              "content": "string",
              "date": "date"
            }
          ],
          "outputEventName": "wiresLoaded"
        }
      },
      {
        "id": "gen-article-ai-article",
        "type": "QueryAI",
        "config": {
          "inputEventName": "wiresLoaded",
          "modelEngineType": "OpenAIQueryEngine",
          "engineId": "openai-query-gen-article",
          "engineConfig": {
            "modelName": "gpt-4",
            "systemPrompt": "generate an article",
            "userPrompt": ""
          },
          "outputEventName": "article"
        }
      },
      {
        "id": "gen-article-ai-style-guide",
        "type": "QueryAI",
        "config": {
          "inputEventName": "article",
          "modelEngineType": "OpenAIQueryEngine",
          "engineId": "openai-query-style",
          "engineConfig": {
            "modelName": "gpt-4",
            "systemPrompt": "apply style to article",
            "userPrompt": ""
          },
          "outputEventName": "styledArticle"
        }
      },
      {
        "id": "gen-article-ai-headline",
        "type": "QueryAI",
        "config": {
          "inputEventName": "styledArticle",
          "modelEngineType": "OpenAIQueryEngine",
          "engineId": "openai-query-headline",
          "engineConfig": {
            "modelName": "gpt-4",
            "systemPrompt": "create headline for article",
            "userPrompt": ""
          },
          "outputEventName": "articleWithHeadline"
        }
      },
      {
        "id": "gen-article-query-user-ask-submit",
        "type": "QueryUser",
        "config": {
          "inputEventName": "articleWithHeadline",
          "queryUserEngineType": "SlackYesNoQueryEngine",
          "engineId": "slack-yes-no",
          "engineConfig": {
            "channel": "testChannel",
            "userPrompt": "Do you want to submit this?",
            "yesOutputEventName": "publishArticle",
            "noOutputEventName": "ignoreArticle"
          }
        }
      }
    ]
  }
}
