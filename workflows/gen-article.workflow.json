{
  "id": "gen-article",
  "type": "workflow",
  "config": {
    "name": "Generate Article from Wire",
    "description": "Generate an article when a new wire appears",
    "nodes": [
      {
        "id": "gen-article-endpoint",
        "type": "endpoint",
        "config": {
          "path": "gen-article",
          "type": "post",
          "outputEventName": "wireDataReceived"
        }
      },
      {
        "id": "gen-article-query-vector",
        "type": "query-vector",
        "config": {
          "inputEventName": "wireDataReceived",
          "vectorType": "weaviate",
          "query": "${headline} ${content}",
          "outputEventName": "wiresLoaded"
        }
      },
      {
        "id": "gen-article-ai-article",
        "type": "QueryAI",
        "config": {
          "inputEventName": "wiresLoaded",
          "modelEngineType": "OpenAIQueryEngine",
          "engineId": "openai-query-gen-article",
          "engineConfig": {
            "modelName": "gpt-4",
            "systemPrompt": "You are an expert journalist blah, here is some background... ${}",
            "userPrompt": ""
          },
          "outputEventName": "article"
        }
      },
      {
        "id": "gen-article-ai-headline",
        "type": "QueryAI",
        "config": {
          "inputEventName": "styledArticle",
          "modelEngineType": "OpenAIQueryEngine",
          "engineId": "openai-query-headline",
          "engineConfig": {
            "modelName": "gpt-4",
            "systemPrompt": "You are an expert editor, specialized in creating headlines",
            "userPrompt": "create a headline for the following article:\n${article}"
          },
          "outputEventName": "articleWithHeadline"
        }
      },
      {
        "id": "gen-article-query-user-ask-submit",
        "type": "QueryUser",
        "config": {
          "inputEventName": "articleWithHeadline",
          "queryUserEngineType": "SlackYesNoQueryEngine",
          "engineId": "slack-yes-no-submit",
          "engineConfig": {
            "channel": "testChannel",
            "userPrompt": "${headline}\n${article}\nDo you want to submit this?",
            "yesOutputEventName": "publishArticle",
            "noOutputEventName": "ignoreArticle"
          }
        }
      },
      {
        "id": "gen-article-submit-article",
        "type": "QueryAPI",
        "config": {
          "inputEventName": "publishArticle",
          "queryAPIEngineType": "HttpPostQueryEngine",
          "engineId": "post-publish-article",
          "engineConfig": {
            "postUrl": "https://example.com",
            "bodyType": "json",
            "bodySchema": {
              "content": "string",
              "headline": "string"
            }
          }
        }
      }
    ]
  }
}
